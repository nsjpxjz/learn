#include<bits/stdc++.h>
using namespace std ;
int father[10005] ;
int find(int x)
{
	if(x == father[x])
		return x ;
	return father[x] = find(father[x]) ;
}
int main()
{
	int n , m ;
	cin >> n >> m ;
	for(int i = 1 ; i <= n ; ++i)
		father[i] = i ; 
	for(int i = 1 ; i <= m ; ++i)
	{
		int z , x , y ;
		cin >> z >> x >> y ;
		if(z == 1)
			father[find(x)] = find(y) ;
		if(z == 2)
		{
			if(find(x) == find(y))
				cout << "Y" << endl ;
			else
				cout << "N" << endl ;
		}
	}
	return 0 ;
}
